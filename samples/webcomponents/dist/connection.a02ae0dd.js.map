{"version":3,"sources":["../../rxjs/connection.js"],"names":["getBBox","o","getClientRects","rect","width","height","x","left","y","top","Raphael","fn","connection","obj1","obj2","line","bg","from","to","bb1","bb2","p","d","dis","i","j","dx","Math","abs","dy","push","length","res","min","apply","x1","y1","x4","y4","max","x2","toFixed","y2","x3","y3","path","join","color","split","attr","stroke","fill"],"mappings":"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","file":"connection.a02ae0dd.js","sourceRoot":"..\\src","sourcesContent":["function getBBox(o) {\n    if (typeof o.getBBox === 'function') {\n        return o.getBBox()\n    }\n    if (typeof o.getClientRects === 'function') {\n        var rect = o.getClientRects()[0]\n        return {\n            width: rect.width,\n            height: rect.height,\n            x: rect.left,\n            y: rect.top\n        }\n    }\n}\nRaphael.fn.connection = function (obj1, obj2, line, bg) {\n    if (obj1.line && obj1.from && obj1.to) {\n        line = obj1;\n        obj1 = line.from;\n        obj2 = line.to;\n    }\n\n\n    var bb1 = getBBox(obj1),\n        bb2 = getBBox(obj2),\n        p = [{x: bb1.x + bb1.width / 2, y: bb1.y - 1},\n        {x: bb1.x + bb1.width / 2, y: bb1.y + bb1.height + 1},\n        {x: bb1.x - 1, y: bb1.y + bb1.height / 2},\n        {x: bb1.x + bb1.width + 1, y: bb1.y + bb1.height / 2},\n        {x: bb2.x + bb2.width / 2, y: bb2.y - 1},\n        {x: bb2.x + bb2.width / 2, y: bb2.y + bb2.height + 1},\n        {x: bb2.x - 1, y: bb2.y + bb2.height / 2},\n        {x: bb2.x + bb2.width + 1, y: bb2.y + bb2.height / 2}],\n        d = {}, dis = [];\n    for (var i = 0; i < 4; i++) {\n        for (var j = 4; j < 8; j++) {\n            var dx = Math.abs(p[i].x - p[j].x),\n                dy = Math.abs(p[i].y - p[j].y);\n            if ((i == j - 4) || (((i != 3 && j != 6) || p[i].x < p[j].x) && ((i != 2 && j != 7) || p[i].x > p[j].x) && ((i != 0 && j != 5) || p[i].y > p[j].y) && ((i != 1 && j != 4) || p[i].y < p[j].y))) {\n                dis.push(dx + dy);\n                d[dis[dis.length - 1]] = [i, j];\n            }\n        }\n    }\n    if (dis.length == 0) {\n        var res = [0, 4];\n    } else {\n        res = d[Math.min.apply(Math, dis)];\n    }\n    var x1 = p[res[0]].x,\n        y1 = p[res[0]].y,\n        x4 = p[res[1]].x,\n        y4 = p[res[1]].y;\n    dx = Math.max(Math.abs(x1 - x4) / 2, 10);\n    dy = Math.max(Math.abs(y1 - y4) / 2, 10);\n    var x2 = [x1, x1, x1 - dx, x1 + dx][res[0]].toFixed(3),\n        y2 = [y1 - dy, y1 + dy, y1, y1][res[0]].toFixed(3),\n        x3 = [0, 0, 0, 0, x4, x4, x4 - dx, x4 + dx][res[1]].toFixed(3),\n        y3 = [0, 0, 0, 0, y1 + dy, y1 - dy, y4, y4][res[1]].toFixed(3);\n    var path = [\"M\", x1.toFixed(3), y1.toFixed(3), \"C\", x2, y2, x3, y3, x4.toFixed(3), y4.toFixed(3)].join(\",\");\n    if (line && line.line) {\n        line.bg && line.bg.attr({path: path});\n        line.line.attr({path: path});\n    } else {\n        var color = typeof line == \"string\" ? line : \"#000\";\n        return {\n            bg: bg && bg.split && this.path(path).attr({stroke: bg.split(\"|\")[0], fill: \"none\", \"stroke-width\": bg.split(\"|\")[1] || 3}),\n            line: this.path(path).attr({stroke: color, fill: \"none\"}),\n            from: obj1,\n            to: obj2\n        };\n    }\n};\n"]}