{"version":3,"sources":["../../rxjs/connection.js"],"names":["getBBox","o","getClientRects","rect","width","height","x","left","y","top","Raphael","fn","connection","obj1","obj2","line","bg","from","to","bb1","bb2","p","d","dis","i","j","dx","Math","abs","dy","push","length","res","min","apply","x1","y1","x4","y4","max","x2","toFixed","y2","x3","y3","path","join","attr","color","split","stroke","fill"],"mappings":"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","file":"connection.bed1ead7.js","sourceRoot":"..\\src","sourcesContent":["function getBBox(o) {\n    if (typeof o.getBBox === 'function') {\n        return o.getBBox()\n    }\n    if (typeof o.getClientRects === 'function') {\n        var rect = o.getClientRects()[0]\n        return {\n            width: rect.width,\n            height: rect.height,\n            x: rect.left,\n            y: rect.top\n        }\n    }\n}\nRaphael.fn.connection = function (obj1, obj2, line, bg) {\n    if (obj1.line && obj1.from && obj1.to) {\n        line = obj1;\n        obj1 = line.from;\n        obj2 = line.to;\n    }\n\n\n    var bb1 = getBBox(obj1),\n        bb2 = getBBox(obj2),\n        p = [{x: bb1.x + bb1.width / 2, y: bb1.y - 1},\n        {x: bb1.x + bb1.width / 2, y: bb1.y + bb1.height + 1},\n        {x: bb1.x - 1, y: bb1.y + bb1.height / 2},\n        {x: bb1.x + bb1.width + 1, y: bb1.y + bb1.height / 2},\n        {x: bb2.x + bb2.width / 2, y: bb2.y - 1},\n        {x: bb2.x + bb2.width / 2, y: bb2.y + bb2.height + 1},\n        {x: bb2.x - 1, y: bb2.y + bb2.height / 2},\n        {x: bb2.x + bb2.width + 1, y: bb2.y + bb2.height / 2}],\n        d = {}, dis = [];\n    for (var i = 0; i < 4; i++) {\n        for (var j = 4; j < 8; j++) {\n            var dx = Math.abs(p[i].x - p[j].x),\n                dy = Math.abs(p[i].y - p[j].y);\n            if ((i == j - 4) || (((i != 3 && j != 6) || p[i].x < p[j].x) && ((i != 2 && j != 7) || p[i].x > p[j].x) && ((i != 0 && j != 5) || p[i].y > p[j].y) && ((i != 1 && j != 4) || p[i].y < p[j].y))) {\n                dis.push(dx + dy);\n                d[dis[dis.length - 1]] = [i, j];\n            }\n        }\n    }\n    if (dis.length == 0) {\n        var res = [0, 4];\n    } else {\n        res = d[Math.min.apply(Math, dis)];\n    }\n    var x1 = p[res[0]].x,\n        y1 = p[res[0]].y,\n        x4 = p[res[1]].x,\n        y4 = p[res[1]].y;\n    dx = Math.max(Math.abs(x1 - x4) / 2, 10);\n    dy = Math.max(Math.abs(y1 - y4) / 2, 10);\n    var x2 = [x1, x1, x1 - dx, x1 + dx][res[0]].toFixed(3),\n        y2 = [y1 - dy, y1 + dy, y1, y1][res[0]].toFixed(3),\n        x3 = [0, 0, 0, 0, x4, x4, x4 - dx, x4 + dx][res[1]].toFixed(3),\n        y3 = [0, 0, 0, 0, y1 + dy, y1 - dy, y4, y4][res[1]].toFixed(3);\n    var path = [\"M\", x1.toFixed(3), y1.toFixed(3), \"C\", x2, y2, x3, y3, x4.toFixed(3), y4.toFixed(3)].join(\",\");\n    if (line && line.line) {\n        line.bg && line.bg.attr({path: path});\n        line.line.attr({path: path});\n    } else {\n        var color = typeof line == \"string\" ? line : \"#000\";\n        return {\n            bg: bg && bg.split && this.path(path).attr({stroke: bg.split(\"|\")[0], fill: \"none\", \"stroke-width\": bg.split(\"|\")[1] || 3}),\n            line: this.path(path).attr({stroke: color, fill: \"none\"}),\n            from: obj1,\n            to: obj2\n        };\n    }\n};\n"]}